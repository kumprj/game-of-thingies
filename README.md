# game-of-thingies

A simple multiplayer party game backend and client scaffold built with TypeScript, Express,
Socket.IO, and React. Uses DynamoDB for persistence and provides REST endpoints plus real-time
updates.

## FEATURES

- Create and manage games with 4-letter game codes
- Submit entries and reveal them when a game starts
- Real-time updates via WebSocket / Socket.IO
- DynamoDB-backed persistence
- Minimal React hook utilities included for client forms

## TECH STACK

- Node.js + TypeScript
- Express for REST API
- Socket.IO for real-time communication
- AWS DynamoDB (via @aws-sdk/lib-dynamodb)
- React for client components/hooks
- npm for package management

## REPOSITORY LAYOUT

- src/ - TypeScript server and client source
- src/routes.ts - API routes for game and entries
- src/db.ts - DynamoDB client wrapper
- src/types.ts - Entry, Game, Score interfaces
- README.md - This file

## GETTING STARTED (LOCAL)

1. Install dependencies:
   `npm install`

2. Configure environment variables (create a .env file if needed):
    - PORT (optional, default 3001)
    - AWS credentials or local DynamoDB configuration used by src/db.ts

3. Start the development server and API - this starts both server/index.ts and client dev server:
   `npm run dev`

## API SUMMARY

Base path: /api

- POST /createGame
  Body: { name: string, question?: string }
  Response: { gameId: string }
  Creates a game with a random 4-letter id.

- POST /games/:gameId/entries
  Body: { authorName: string, text: string }
  Response: { entryId: string }
  Adds an entry and emits entriesUpdated to the game's Socket.IO room.

- POST /games/:gameId/start
  Response: { success: true }
  Shuffles players, sets game as started, reveals entries, and emits gameStarted with the turn
  order.

- GET /warmup
  Returns OK for health checks.

## WEBSOCKET EVENTS

- Clients should join a room by emitting joinGame with the gameId (server calls socket.join(
  gameId)).
- Server emits:
    - entriesUpdated when entries change
    - gameStarted with payload { turnOrder: string[] } when a game starts

## TESTING

- Unit tests live alongside source files or in an __tests__ directory.
- Run tests:
  `npm test`
- Tests use Vitest framework, can also run with:
  `npx vitest --ui`

DEVELOPMENT NOTES

- The server attaches the Socket.IO instance to the Express request object so routes can emit
  events: (req as any).io
- Game IDs are uppercase 4-letter codes generated by the server
- DynamoDB tables expected: Games and Entries with suitable primary keys (gameId for Games; gameId +
  entryId composite key for Entries)

CONTRIBUTING

- Open issues and PRs on the repository remote: origin (git@github.com:kumprj/game-of-thingies.git)
- Follow existing TypeScript style and tests

LICENSE
NA